var rcmail_editor_settings={skin:"default",skin_variant:""};var rcs_common=new function(){this.runBeforeReady=function(){if($("#login-form #logo").length){$("#login-form").append("<div id='company-name'>"+$("#login-form #logo").attr("alt")+"</div>");$("#login-form .box-inner").prepend("<h1>"+$("#rcmloginsubmit").attr("value")+"</h1>")}this.initializeColors()};this.runOnReady=function(){if($("#login-form").length){$("body").addClass("login-page")}if($("a.iconbutton").length){$("a.iconbutton").html("")}if($("#calneweventbut").length){$("body").addClass("calendar-page");rcmail.env.skin="larry"}if($("#topnav").length){$("#rcs-logo").appendTo("#topnav")}if($("#login-form").length){$("body").append("<div id='login-logo-icon'><a href='http://roundcubeskins.net' target='_blank' id='login-logo-icon-2'></a><a href='http://roundcubeskins.net' target='_blank' title='More Roundcube skins at roundcubeskins.net' id='login-logo-icon-1'></a></div>")}if($(".button-skin-options .tooltip").length){$(".button-skin-options .tooltip").html(rcs_skin.label_skin)}if($(".plugin_calendar").length){$("#taskbar a.button-calendar").addClass("button-selected")}if($(".plugin_sticky_notes").length){$("#taskbar a.button-sticky_notes").addClass("button-selected")}if($(".plugin_planner").length){$("#taskbar a.button-planner").addClass("button-selected")}if($("#rss").length){$("#rss").appendTo("#folderlist-footer")}if(document.URL.indexOf("action=plugin.userinfo")){$("#pluginbody h4").addClass("boxtitle");$("#pluginbody table").css("margin","10px")}if($("#skin_preview").length){$(".skinitem").unbind("click");$(".skinitem").click(function(){var b=$(this).children().val();if(b=="larry"||b=="classic"){$("#skin_preview_img").attr("src","./plugins/settings/skins/"+b+"/images/"+b+".png")}else{$("#skin_preview_img").attr("src","./skins/"+b+"/preview.png")}});var a=false;if($(".skinitem input[type=radio]").length){a=$(".skinitem input:checked").val()}else{if($("#desktop-skin-select").length){a=$("#desktop-skin-select .skinitem input").val()}else{if($("select#rcmfd_skin").length){a=$("select#rcmfd_skin").val()}}}if(a){$("#skin_preview_img").attr("src","./skins/"+a+"/preview.png")}}if($("#planner_controls a").not("#today").length){$("#planner_controls a").not("#today").html("")}};this.changeColor=function(a,c){c=typeof c!=="undefined"?c:true;var b=$("body");b.removeClass(function(e,d){return(d.match(/color-\S+/g)||[]).join(" ")});b.addClass("color-"+a);if(c){rcmail.save_pref({name:"rcs_skin_color_"+rcmail.env.rcs_skin,value:a})}};this.showOptions=function(a){if($("#skin-options").length){UI.show_popup("skin-options")}};this.pluginLoaded=function(){return typeof rcmail.env.rcs_skin!=="undefined"};this.mobile=function(){return rcs_common.pluginLoaded()&&rcmail.env.rcs_mobile};this.initializeColors=function(){if(typeof skinColorValues=="undefined"){return}if(typeof skinColorDefault=="undefined"){skinColorDefault=skinColorValues[0][0]}if(typeof skinColorStyles=="undefined"){skinColorStyles=""}if(rcs_common.pluginLoaded()){if(rcmail.env.rcs_mobile){$("#topnav a.button-logout").after("<a class='button-skin-options' href='javascript:void(0)' onclick='rcs_mobile.popup(\"skin-options\")'><span style='background-color: #b0263b'></span><span style='background-color: #00860e'></span><span style='background-color: #0075c8'></span><span style='background-color: #8d2297'></span></a>")}else{$("#topnav a.button-logout").before("<a class='button-skin-options' href='javascript:void(0)' id='skin-optionslink' onclick='rcs_common.showOptions(this)'><span class='button-inner'></span></a>")}}var h="";var c=skinColorValues[0].length;for(var g=0;g<skinColorValues.length;g++){var k=skinColorStyles;for(var f=0;f<c;f++){k=k.replace(new RegExp("%"+(f+1),"g"),skinColorValues[g][f])}h+=k}h="<style>"+h+"</style>";var d="";for(var g=0;g<skinColorValues.length;g++){d+="<a class='color-box' onclick='rcs_common.changeColor(&quot;"+skinColorValues[g][0]+"&quot;)' style='background:#"+skinColorValues[g][0]+" !important'></a>";if((g+1)%6==0){d+="<br />"}}var a="<div id='skin-options' class='popupmenu'>"+(rcs_common.mobile()?"<h5>"+rcs_mobile.label_options+"</h5>":"")+"<div id='skin-color-select'>"+d+"</div><div class='loader'></div></div>";$("body").append(h+a);var b=typeof rcmail.env.rcs_color!=="undefined"?rcmail.env.rcs_color:false;var e=false;for(var g=0;g<skinColorValues.length;g++){if(b==skinColorValues[g][0]){e=b;break}}rcs_common.changeColor(e?e:skinColorDefault,false)}};